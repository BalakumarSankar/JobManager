# Application Configuration
spring.application.name=job-dispatcher
server.port=8080

# JWT Configuration
jwt.secret=mySecretKey123456789012345678901234567890
jwt.expiration=3600000

# Database Configuration
spring.datasource.url=jdbc:mysql://localhost:3306/job_dispatcher?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=password
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=true

# Flyway Configuration
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=true

# Rate Limiting Configuration
rate-limiting.enabled=true
rate-limiting.default-requests-per-minute=60
rate-limiting.default-requests-per-hour=1000
rate-limiting.default-requests-per-day=10000
rate-limiting.burst-capacity=10
rate-limiting.window-size=PT1M

# Rate limits for job types
rate-limiting.one-time-job.requests-per-minute=30
rate-limiting.one-time-job.requests-per-hour=500
rate-limiting.one-time-job.burst-capacity=5

rate-limiting.repetitive-job.requests-per-minute=20
rate-limiting.repetitive-job.requests-per-hour=300
rate-limiting.repetitive-job.burst-capacity=3

# Rate limits for user tiers
rate-limiting.free-tier.requests-per-minute=10
rate-limiting.free-tier.requests-per-hour=100
rate-limiting.free-tier.requests-per-day=1000
rate-limiting.free-tier.burst-capacity=2

rate-limiting.premium-tier.requests-per-minute=50
rate-limiting.premium-tier.requests-per-hour=1000
rate-limiting.premium-tier.requests-per-day=10000
rate-limiting.premium-tier.burst-capacity=8

rate-limiting.enterprise-tier.requests-per-minute=200
rate-limiting.enterprise-tier.requests-per-hour=5000
rate-limiting.enterprise-tier.requests-per-day=50000
rate-limiting.enterprise-tier.burst-capacity=20

# Job Retry Configuration
job-retry.enabled=true
job-retry.default-max-attempts=3
job-retry.default-initial-delay=1000
job-retry.default-multiplier=2.0
job-retry.default-max-delay=30000
job-retry.default-jitter=0.1
job-retry.retryable-exceptions=java.lang.RuntimeException,java.lang.Exception
job-retry.non-retryable-exceptions=java.lang.IllegalArgumentException,java.lang.SecurityException

# Job Priority Configuration
job-priority.enabled=true
job-priority.default-priority=NORMAL
job-priority.critical-limit=100
job-priority.high-limit=50
job-priority.normal-limit=20
job-priority.low-limit=10
job-priority.background-limit=5

# Job Timeout Configuration - REMOVED (jobs can run as long as needed)

# Logging Configuration
logging.level.com.example.jobdispatcher=INFO
logging.level.org.springframework.scheduling=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# Thread Pool Configuration with Separate Queues
job-dispatcher.one-time-job.core-pool-size=5
job-dispatcher.one-time-job.max-pool-size=20
job-dispatcher.one-time-job.keep-alive-time=60
job-dispatcher.one-time-job.queue-capacity=100
job-dispatcher.one-time-job.thread-name-prefix=job-dispatcher-
job-dispatcher.one-time-job.queue-type=LINKED_BLOCKING_QUEUE

job-dispatcher.repetitive-job.core-pool-size=3
job-dispatcher.repetitive-job.max-pool-size=10
job-dispatcher.repetitive-job.keep-alive-time=120
job-dispatcher.repetitive-job.queue-capacity=50
job-dispatcher.repetitive-job.thread-name-prefix=job-dispatcher-
job-dispatcher.repetitive-job.queue-type=LINKED_BLOCKING_QUEUE

job-dispatcher.async-job.core-pool-size=8
job-dispatcher.async-job.max-pool-size=25
job-dispatcher.async-job.keep-alive-time=90
job-dispatcher.async-job.queue-capacity=200
job-dispatcher.async-job.thread-name-prefix=job-dispatcher-
job-dispatcher.async-job.queue-type=LINKED_BLOCKING_QUEUE

# Job Grouping Configuration
job-dispatcher.grouping.enabled=true
job-dispatcher.grouping.default-buffer-millis=5000
job-dispatcher.grouping.max-groups=1000
job-dispatcher.grouping.cleanup-interval-millis=300000

# Management endpoints
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always
